<div class="magazine-viewer">
  <button class="fullscreen-btn" (click)="openFullscreen()">fullscreen</button>
  <!-- Image principale -->
  <div
    class="main-image-container"
    (swipeleft)="nextPage()"
    (swiperight)="prevPage()"
    [class.zoomed]="isZoomed"
    (click)="toggleZoom()"
  >
    <pinch-zoom>
      <img [src]="currentPage" alt="Page" class="main-image" [@fadeImage] />
    </pinch-zoom>
    <button class="nav-button prev" (click)="prevPage()">â€¹</button>
    <button class="nav-button next" (click)="nextPage()">â€º</button>
  </div>

  <!-- Slider de miniatures -->
  <div class="thumbnail-slider">
    <img
      *ngFor="let page of listPagesByLivre; let i = index"
      [src]="page.url"
      [class.active]="i === currentIndex"
      (click)="goToPage(i)"
      class="thumbnail"
      alt="aperÃ§u page {{ i + 1 }}"
    />
  </div>
</div>

<!-- Bouton flottant pour ouvrir -->
<button class="chatbot-float-btn" (click)="chatVisible = !chatVisible">
  ðŸ’¬
</button>

<!-- FenÃªtre popup du chatbot -->
<div class="chatbot-popup" *ngIf="chatVisible">
  <div class="chatbot-header">
    <span class="chatbot-title">Assistant MEGABOOK</span>
    <button class="chatbot-close-btn" (click)="chatVisible = false">âœ–</button>
    <!-- FenÃªtre popup du chatbot -->
    <div class="chatbot-model-select">
      <label for="model-select">ModÃ¨le :</label>
      <select
        id="model-select"
        [(ngModel)]="selectedModel"
        (change)="onModelChange()"
      >
        <option *ngFor="let model of chatbotModels" [value]="model.value">
          {{ model.label }}
        </option>
      </select>
    </div>
  </div>

  <iframe
    [src]="chatbotUrlSafe"
    class="chatbot-frame-popup"
    frameborder="0"
    allow="microphone; camera"
  ></iframe>
</div>
